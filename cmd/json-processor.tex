% cmd/json-processor.tex - A XeLaTeX template snippet to process JSON data

\newcommand{\getvalue}[1]{\JSONParseValue{\data}{#1}}
\newcommand{\getexpandablevalue}[1]{\JSONParseExpandableValue{\data}{#1}}
\def\parseJSONKey{}

\newcommand{\prettifyJSON}[2]{%
  \begingroup%
  \JSONParseArrayValues{\data}{#1}{#2}%
  \endgroup%
}

\newcommand{\safeParseJSON}[3]{%
  \begingroup%
  % Store the current value of parseJSONKey
  \def\parseJSONKey{#1}%
  \JSONParseArrayValuesMap{\data}{#1}[#2]{#3}%
  \endgroup%
}

\newcommand{\callSafeParseJSON}[3]{%
  \safeParseJSON{#1}{#2}{#3}%
}